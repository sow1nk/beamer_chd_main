\mode<presentation>

\RequirePackage{tikz,setspace,graphicx}
\usetikzlibrary{positioning}

% \usefonttheme{professionalfonts}
\setbeamertemplate{navigation symbols}{}

% \definecolor{blue}{RGB}{31,91,166} % fudan
% \usecolortheme[RGB={31,91,166}]{structure}

\definecolor{blue}{RGB}{60,69,147} % chd
\usecolortheme[RGB={60,69,147}]{structure}

% 显示章节编号
\setbeamertemplate{section in toc}[sections numbered]
% 显示小节编号
\setbeamertemplate{subsection in toc}[subsections numbered]
% \setbeamertemplate{subsection number}{\thesubsection\hspace{0.5em}}

\setbeamertemplate{section number}{\textbf{\thesection}}  % 章节编号加粗
\setbeamertemplate{subsection number}{\textit{\thesubsection}}  % 小节编号斜体


% Titlepage 模版
% 
% - 使用 `\setbeamertemplate{title page}` 命令自定义标题页布局。
% - 使用 `\includegraphics` 命令插入一个高度为文本高度 10% 的 logo 图像（`chdbluelogo.pdf`）。
% - 通过 `\vskip` 命令添加垂直间距以调整布局。
% - 标题通过 `\usebeamerfont{title}` 和 `\usebeamercolor[fg]{title}` 命令显示，
%   并使用 `\textbf` 将标题文本加粗。
% - 使用 TikZ 绘制标题下方的水平线，样式为超粗的蓝色线条。
% - 作者、机构和日期显示在标题下方，每部分之间用垂直间距分隔。
% - 使用 `\begin{spacing}{1.2}` 环境调整标题文本的行间距。
\setbeamertemplate{title page}{
  \includegraphics[height=0.1\textheight]{sources/chdbluelogo.pdf}
  \vskip3em
  \begin{spacing}{1.2}
    {\usebeamerfont{title}\usebeamercolor[fg]{title}\textbf\inserttitle}
  \end{spacing}
  \tikz \draw[ultra thick,line cap=round,color=blue!80] (0,0) -- (\textwidth-1.6pt,0);
  \vskip3em
  {\usebeamercolor[fg]{title}\insertauthor}
  \vskip0.3em
  \insertinstitute
  \vskip0.3em
  \insertdate
}

% 背景模板
\setbeamertemplate{background}{
  \begin{tikzpicture}
    \path (0,0) -- (\paperwidth,\paperheight);
    \node [opacity=0.025] at (0.8\paperwidth,0.25\paperheight) {\includegraphics[width=11cm]{sources/chdbackground_blue.pdf}};
  \end{tikzpicture}
}

% 背景模板，仅在首页显示
% \setbeamertemplate{background}{
%   \ifnum\insertframenumber=1
%     \begin{tikzpicture}
%       \path (0,0) -- (\paperwidth,\paperheight);
%       \node [opacity=0.025] at (0.8\paperwidth,0.25\paperheight) {\includegraphics[width=11cm]{chdbackground.pdf}};
%     \end{tikzpicture}
%   \fi
% }

%设置headline格式
\useoutertheme[headline]{smoothbars}
\setbeamercolor{section in head/foot}{fg=blue, bg=white}

% 页脚模板
\setbeamertemplate{footline}{
  \begin{beamercolorbox}[ht=3em,dp=1em,left]{}
    \hspace{1em}
    \insertframenumber/\inserttotalframenumber
    \hspace{1em}
    {\usebeamercolor[fg]{title}\insertshorttitle}
    \hspace{1em}
    \insertshortauthor
  \end{beamercolorbox}
}


% --------------------------------- 预设颜色 --------------------------------- %
% \definecolor{chdbeamer@base}{RGB}{0, 64, 152} % 底色：孔雀蓝
\definecolor{chd@normalblock}{RGB}{60, 69, 147}
\definecolor{chdbeamer@graybase}{RGB}{240, 240, 240}
\definecolor{chd@exampleblock}{RGB}{97, 101, 184}
\definecolor{chd@alertblock}{RGB}{201, 90, 92}
\definecolor{chdbeamer@red}{RGB}{210, 26, 66}
\definecolor{chdbeamer@green}{RGB}{0, 127, 0}

% 设置定理区块显示序号
\setbeamertemplate{theorems}[numbered]

% 设置证明区块
\addtobeamertemplate{proof begin}{
  \setbeamercolor{block title}{fg=white, bg=chdbeamer@red!50!white}
  \setbeamercolor{block body}{fg=black, bg=chdbeamer@red!20!white}
}


% 设置展示块圆角 是否有阴影显示
\setbeamertemplate{blocks}[rounded][shadow=false]


% ---------------------- 标题颜色设置 ----------------- %
\setbeamercolor{block title}{fg=white, bg=chd@normalblock}
\setbeamercolor{block title example}{
  use=alerted text, fg=white, bg=chd@exampleblock}
\setbeamercolor{block title alerted}{
  use=alerted text, fg=white, bg=chd@alertblock}

% 设置展示块内容的文本颜色、背景颜色
\setbeamercolor{block body}{
  parent=normal text, use=block title,
  bg=block title.bg!10!bg}
\setbeamercolor{block body example}{
  parent=normal text, bg=chd@exampleblock!10!bg}
\setbeamercolor{block body alerted}{
  parent=normal text, use=block title alerted,
  bg=block title alerted.bg!10!bg}

\mode<all>
